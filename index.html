<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HauLTCE200918-Web201c-SE2006 - Flashcard Quiz</title>
    <style>
        /* Reset v√† Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        h1 {
            color: #2c3e50;
            font-size: 2.8em;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 25px;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
        }

        h2 {
            color: #3498db;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            font-size: 1.8em;
        }

        h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        /* List Styles */
        ul {
            list-style: none;
            padding: 0;
        }

        li {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-left: 5px solid #3498db;
            border-radius: 10px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        li:hover {
            background: #e3f2fd;
            transform: translateX(10px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }

        li:before {
            content: "üìÅ";
            margin-right: 15px;
            font-size: 1.2em;
        }

        #idea:before {
            content: "‚öôÔ∏è";
        }

        a {
            color: #2980b9;
            text-decoration: none;
            font-weight: 500;
            flex-grow: 1;
            transition: color 0.3s;
        }

        a:hover {
            color: #1a5276;
            text-decoration: underline;
        }

        /* Code Section */
        .code-section {
            background: #2d3436;
            color: #fff;
            padding: 25px;
            border-radius: 15px;
            overflow-x: auto;
            position: relative;
            margin: 25px 0;
        }

        .code-section:before {
            content: "HTML Code";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #2d3436;
            color: #fff;
            padding: 5px 15px;
            border-radius: 5px;
            font-size: 0.9em;
            font-weight: bold;
        }

        pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .tag { color: #e74c3c; }
        .attribute { color: #9b59b6; }
        .value { color: #2ecc71; }

        /* Upload Section */
        .upload-section {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            margin-top: 30px;
        }

        .upload-area {
            border: 3px dashed #3498db;
            border-radius: 15px;
            padding: 40px;
            margin: 30px auto;
            max-width: 600px;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            background: #e3f2fd;
            border-color: #2980b9;
        }

        .upload-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 15px rgba(102, 126, 234, 0.4);
            opacity: 0.9;
        }

        .btn-primary {
            background: linear-gradient(45deg, #3498db, #2980b9);
        }

        .btn-success {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
        }

        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        /* Quiz Section */
        .quiz-container {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-top: 30px;
        }

        .question {
            font-size: 1.4em;
            margin-bottom: 30px;
            color: #2c3e50;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            padding: 20px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: #e3f2fd;
            border-color: #3498db;
            transform: scale(1.02);
        }

        .option.selected {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }

        .option.correct {
            background: #2ecc71;
            color: white;
            border-color: #27ae60;
        }

        .option.wrong {
            background: #e74c3c;
            color: white;
            border-color: #c0392b;
        }

        /* Result Section */
        .result {
            display: none;
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 20px;
            margin-top: 30px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0 auto 30px;
            font-size: 2em;
            font-weight: bold;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 25px;
            color: white;
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 2em;
            }

            .options {
                grid-template-columns: 1fr;
            }

            .section {
                padding: 20px;
            }

            .upload-area {
                padding: 20px;
            }
        }

        /* Loading Animation */
        .loader {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Taunt Messages */
        .taunt {
            display: none;
            padding: 15px;
            margin: 15px 0;
            background: #ffeaa7;
            border-left: 5px solid #fdcb6e;
            border-radius: 10px;
            font-weight: 600;
            color: #d63031;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Image Preview */
        .image-preview {
            max-width: 300px;
            margin: 20px auto;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: none;
        }

        .image-preview img {
            width: 100%;
            height: auto;
            display: block;
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>HauLTCE200918-Web201c-SE2006</h1>
        <p class="subtitle">Flashcard Quiz System - T·∫°o quiz t·ª´ ·∫£nh v·ªõi AI</p>

        <div class="btn-group">
            <button class="btn" onclick="showHome()">üè† Trang ch·ªß</button>
            <button class="btn btn-primary" onclick="showUpload()">üì§ Upload ·∫£nh</button>
            <button class="btn btn-success" onclick="startQuiz()">üéÆ B·∫Øt ƒë·∫ßu Quiz</button>
        </div>
    </header>

    <div id="homeSection" class="main-content">
        <div class="section">
            <h2>üìÅ D·ª± √°n Flashcard Quiz</h2>
            <p>Ch√†o m·ª´ng ƒë·∫øn v·ªõi h·ªá th·ªëng t·∫°o flashcard v√† quiz t·ª± ƒë·ªông t·ª´ ·∫£nh!</p>

            <ul>
                <li id="idea">.idea - Th∆∞ m·ª•c c·∫•u h√¨nh d·ª± √°n</li>
                <li><a href="#" onclick="showUpload()">üì∑ Upload ·∫£nh - T·∫£i ·∫£nh l√™n ƒë·ªÉ t·∫°o quiz</a></li>
                <li><a href="#" onclick="showCode()">üìÑ index.html - File HTML ch√≠nh</a></li>
                <li><a href="#" onclick="showQuiz()">üéØ Quiz Game - Ch∆°i quiz t∆∞∆°ng t√°c</a></li>
            </ul>
        </div>

        <div class="section">
            <h2>üöÄ T√≠nh nƒÉng ch√≠nh</h2>
            <ul>
                <li>‚úÖ Upload ·∫£nh ch·ª©a vƒÉn b·∫£n</li>
                <li>‚úÖ OCR t·ª± ƒë·ªông ƒë·ªçc text t·ª´ ·∫£nh</li>
                <li>‚úÖ T·∫°o quiz t·ª± ƒë·ªông v·ªõi 4 ƒë√°p √°n</li>
                <li>‚úÖ H·ªá th·ªëng t√≠nh ƒëi·ªÉm th√¥ng minh</li>
                <li>‚úÖ C√¢u ch√™u ch·ªçc vui nh·ªôn khi sai</li>
                <li>‚úÖ L√†m l·∫°i c√¢u sai ho·∫∑c to√†n b·ªô quiz</li>
            </ul>
        </div>

        <div id="codeSection" class="section" style="display: none;">
            <h2>üìù M√£ HTML c·ªßa d·ª± √°n</h2>
            <div class="code-section">
                    <pre><code><span class="tag">&lt;div</span> <span class="attribute">class</span>=<span class="value">"main"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;h1&gt;</span>HauLTCE200918-Web201c-SE2006<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;ul&gt;</span>
        <span class="tag">&lt;li</span> <span class="attribute">id</span>=<span class="value">"idea"</span><span class="tag">&gt;</span>.idea<span class="tag">&lt;/li&gt;</span>
        <span class="tag">&lt;li&gt;&lt;a</span> <span class="attribute">href</span>=<span class="value">"#"</span><span class="tag">&gt;</span>index.html<span class="tag">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="tag">&lt;li&gt;&lt;a</span> <span class="attribute">href</span>=<span class="value">"#"</span><span class="tag">&gt;</span>External Libraries<span class="tag">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="tag">&lt;li&gt;&lt;a</span> <span class="attribute">href</span>=<span class="value">"#"</span><span class="tag">&gt;</span>Scratches and Consoles<span class="tag">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="tag">&lt;/ul&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
            </div>
            <button class="btn" onclick="copyCode()">üìã Copy Code</button>
        </div>
    </div>

    <!-- Upload Section -->
    <div id="uploadSection" class="section" style="display: none;">
        <h2>üì§ Upload ·∫¢nh ƒê·ªÉ T·∫°o Quiz</h2>
        <p>Ch·ªçn ·∫£nh ch·ª©a n·ªôi dung vƒÉn b·∫£n (t√†i li·ªáu, s√°ch, ghi ch√∫,...)</p>

        <div class="upload-area" onclick="document.getElementById('fileInput').click()">
            <div class="upload-icon">üìÅ</div>
            <h3>K√©o th·∫£ ·∫£nh v√†o ƒë√¢y ho·∫∑c click ƒë·ªÉ ch·ªçn</h3>
            <p>H·ªó tr·ª£: JPG, PNG, GIF (T·ªëi ƒëa 5MB)</p>
        </div>

        <input type="file" id="fileInput" accept="image/*" style="display: none" onchange="handleImageUpload(event)">

        <div class="image-preview" id="imagePreview">
            <img id="previewImage" src="" alt="Preview">
        </div>

        <div class="loader" id="uploadLoader">
            <div class="spinner"></div>
            <p>ƒêang ph√¢n t√≠ch ·∫£nh v√† t·∫°o quiz...</p>
        </div>

        <div id="uploadResult" style="display: none;">
            <h3>‚úÖ Upload th√†nh c√¥ng!</h3>
            <p>·∫¢nh ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω v√† quiz ƒë√£ s·∫µn s√†ng.</p>
            <button class="btn btn-success" onclick="startQuiz()">üéÆ B·∫Øt ƒë·∫ßu Quiz Ngay</button>
        </div>
    </div>

    <!-- Quiz Section -->
    <div id="quizSection" class="quiz-container">
        <h2>üéØ Quiz Game</h2>

        <div class="progress">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span>Ti·∫øn ƒë·ªô: <span id="currentQuestion">1</span>/<span id="totalQuestions">5</span></span>
                <span>ƒêi·ªÉm: <span id="score">0</span> ‚úÖ</span>
            </div>
            <div style="background: #ddd; height: 10px; border-radius: 5px;">
                <div id="progressBar" style="background: #3498db; height: 100%; width: 0%; border-radius: 5px;"></div>
            </div>
        </div>

        <div class="question" id="questionText">
            C√¢u h·ªèi s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y...
        </div>

        <div class="options" id="optionsContainer">
            <!-- Options will be generated here -->
        </div>

        <div class="taunt" id="tauntMessage">
            <!-- Taunt messages will appear here -->
        </div>

        <div style="text-align: center;">
            <button class="btn btn-primary" id="nextButton" onclick="nextQuestion()" style="display: none;">C√¢u ti·∫øp theo ‚û°Ô∏è</button>
            <button class="btn btn-success" id="checkButton" onclick="checkAnswer()">Ki·ªÉm tra ƒë√°p √°n</button>
        </div>
    </div>

    <!-- Result Section -->
    <div id="resultSection" class="result">
        <h2>üèÜ K·∫øt Qu·∫£ Quiz</h2>

        <div class="score-circle">
            <span id="finalScore">0</span>/<span id="totalScore">5</span>
        </div>

        <h3 id="resultTitle">K·∫øt qu·∫£ c·ªßa b·∫°n</h3>
        <p id="resultMessage"></p>

        <div id="tauntsCollection" style="display: none; margin: 20px 0;">
            <h4>üòÇ B·ªô s∆∞u t·∫≠p c√¢u ch√™u ch·ªçc b·∫°n nh·∫≠n ƒë∆∞·ª£c:</h4>
            <div id="tauntsList"></div>
        </div>

        <div class="btn-group" style="margin-top: 30px;">
            <button class="btn btn-danger" onclick="retryIncorrect()">üîÅ L√†m l·∫°i c√¢u sai</button>
            <button class="btn btn-primary" onclick="retryAll()">üîÑ L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
            <button class="btn" onclick="showHome()">üè† V·ªÅ trang ch·ªß</button>
        </div>
    </div>

    <footer>
        <p>¬© 2024 HauLTCE200918-Web201c-SE2006 | D·ª± √°n h·ªçc t·∫≠p - Flashcard Quiz System</p>
        <p>M√¥n h·ªçc: Ph√°t tri·ªÉn ·ª©ng d·ª•ng web | Gi·∫£ng vi√™n h∆∞·ªõng d·∫´n: [T√™n GV]</p>
    </footer>
</div>

<script>
    // ========== BI·∫æN TO√ÄN C·ª§C ==========
    let currentQuiz = null;
    let currentQuestionIndex = 0;
    let score = 0;
    let incorrectQuestions = [];
    let tauntsReceived = [];
    let selectedAnswer = null;

    // Danh s√°ch c√¢u ch√™u ch·ªçc
    const tauntMessages = [
        "Tr·ªùi ∆°i, c√¢u n√†y d·ªÖ m√†! üòÖ",
        "C√≥ v·∫≠y c≈©ng sai ƒë∆∞·ª£c √°? ü§£",
        "B·∫°n ƒëang m∆° ng·ªß h·∫£? üò¥",
        "Th√¥i xong, m·∫•t ƒëi·ªÉm r·ªìi! üò≠",
        "∆† k√¨a, sai b√©t r·ªìi nha! üôà",
        "H·ªçc l·∫°i ƒëi b·∫°n ∆°i! üìö",
        "C√¢u n√†y m√† c≈©ng sai n·ªØa h·∫£? üòÇ",
        "ƒêau l√≤ng qu√° ƒëi! üíî",
        "B·∫°n c·∫ßn cafe th√™m ch√∫t kh√¥ng? ‚òï",
        "Th·∫ø n√†y th√¨ kh√¥ng l√™n chuy√™n gia ƒë∆∞·ª£c ƒë√¢u! ü•¥"
    ];

    // ========== H√ÄM HI·ªÇN TH·ªä ==========
    function showHome() {
        document.getElementById('homeSection').style.display = 'grid';
        document.getElementById('uploadSection').style.display = 'none';
        document.getElementById('quizSection').style.display = 'none';
        document.getElementById('resultSection').style.display = 'none';
        document.getElementById('codeSection').style.display = 'none';
    }

    function showUpload() {
        document.getElementById('homeSection').style.display = 'none';
        document.getElementById('uploadSection').style.display = 'block';
        document.getElementById('quizSection').style.display = 'none';
        document.getElementById('resultSection').style.display = 'none';
        document.getElementById('codeSection').style.display = 'none';
    }

    function showQuiz() {
        if (!currentQuiz) {
            loadSampleQuiz();
        }
        document.getElementById('homeSection').style.display = 'none';
        document.getElementById('uploadSection').style.display = 'none';
        document.getElementById('quizSection').style.display = 'block';
        document.getElementById('resultSection').style.display = 'none';
        document.getElementById('codeSection').style.display = 'none';
        displayCurrentQuestion();
    }

    function showCode() {
        document.getElementById('homeSection').style.display = 'none';
        document.getElementById('uploadSection').style.display = 'none';
        document.getElementById('quizSection').style.display = 'none';
        document.getElementById('resultSection').style.display = 'none';
        document.getElementById('codeSection').style.display = 'block';
    }

    // ========== X·ª¨ L√ù UPLOAD ·∫¢NH ==========
    function handleImageUpload(event) {
        const file = event.target.files[0];
        if (!file) return;

        // Hi·ªÉn th·ªã preview
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('previewImage').src = e.target.result;
            document.getElementById('imagePreview').style.display = 'block';
        };
        reader.readAsDataURL(file);

        // Hi·ªÉn th·ªã loader
        document.getElementById('uploadLoader').style.display = 'block';

        // Gi·∫£ l·∫≠p x·ª≠ l√Ω OCR v√† t·∫°o quiz (trong th·ª±c t·∫ø s·∫Ω g·ªçi API)
        setTimeout(() => {
            document.getElementById('uploadLoader').style.display = 'none';
            document.getElementById('uploadResult').style.display = 'block';

            // T·∫°o quiz m·∫´u t·ª´ ·∫£nh (gi·∫£ l·∫≠p)
            createQuizFromImage();

            alert('‚úÖ ƒê√£ t·∫°o quiz th√†nh c√¥ng t·ª´ ·∫£nh!');
        }, 2000);
    }

    // ========== QUIZ FUNCTIONS ==========
    function loadSampleQuiz() {
        currentQuiz = {
            title: "Quiz M·∫´u - Ki·∫øn th·ª©c t·ªïng h·ª£p",
            questions: [
                {
                    id: 1,
                    question: "Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† th√†nh ph·ªë n√†o?",
                    correctAnswer: "H√† N·ªôi",
                    options: ["H·ªì Ch√≠ Minh", "ƒê√† N·∫µng", "H√† N·ªôi", "Hu·∫ø"],
                    explanation: "H√† N·ªôi l√† th·ªß ƒë√¥ c·ªßa Vi·ªát Nam t·ª´ nƒÉm 1010"
                },
                {
                    id: 2,
                    question: "Ai l√† ng∆∞·ªùi t√¨m ra ƒë·ªãnh lu·∫≠t v·∫°n v·∫≠t h·∫•p d·∫´n?",
                    correctAnswer: "Isaac Newton",
                    options: ["Albert Einstein", "Isaac Newton", "Galileo", "Archimedes"],
                    explanation: "Newton ph√°t hi·ªán ra ƒë·ªãnh lu·∫≠t n√†y v√†o nƒÉm 1687"
                },
                {
                    id: 3,
                    question: "ƒê∆°n v·ªã ƒëo c∆∞·ªùng ƒë·ªô d√≤ng ƒëi·ªán l√† g√¨?",
                    correctAnswer: "Ampe",
                    options: ["Volt", "Watt", "Ampe", "Ohm"],
                    explanation: "Ampe (A) l√† ƒë∆°n v·ªã ƒëo c∆∞·ªùng ƒë·ªô d√≤ng ƒëi·ªán"
                },
                {
                    id: 4,
                    question: "Lo√†i ƒë·ªông v·∫≠t n√†o l·ªõn nh·∫•t tr√™n Tr√°i ƒê·∫•t?",
                    correctAnswer: "C√° voi xanh",
                    options: ["Voi", "C√° voi xanh", "Kh·ªßng long", "H∆∞∆°u cao c·ªï"],
                    explanation: "C√° voi xanh c√≥ th·ªÉ d√†i t·ªõi 30m v√† n·∫∑ng 200 t·∫•n"
                },
                {
                    id: 5,
                    question: "N∆∞·ªõc n√†o c√≥ h√¨nh d·∫°ng gi·ªëng chi·∫øc ·ªßng?",
                    correctAnswer: "√ù",
                    options: ["Ph√°p", "√ù", "T√¢y Ban Nha", "Hy L·∫°p"],
                    explanation: "B·∫£n ƒë·ªì n∆∞·ªõc √ù c√≥ h√¨nh d·∫°ng nh∆∞ m·ªôt chi·∫øc ·ªßng"
                }
            ]
        };
    }

    function createQuizFromImage() {
        // Gi·∫£ l·∫≠p t·∫°o quiz t·ª´ ·∫£nh
        loadSampleQuiz();
    }

    function startQuiz() {
        if (!currentQuiz) {
            loadSampleQuiz();
        }

        // Reset quiz
        currentQuestionIndex = 0;
        score = 0;
        incorrectQuestions = [];
        tauntsReceived = [];
        selectedAnswer = null;

        showQuiz();
    }

    function displayCurrentQuestion() {
        if (!currentQuiz || !currentQuiz.questions[currentQuestionIndex]) return;

        const question = currentQuiz.questions[currentQuestionIndex];

        // C·∫≠p nh·∫≠t UI
        document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
        document.getElementById('totalQuestions').textContent = currentQuiz.questions.length;
        document.getElementById('score').textContent = score;
        document.getElementById('questionText').textContent = question.question;

        // C·∫≠p nh·∫≠t progress bar
        const progress = ((currentQuestionIndex) / currentQuiz.questions.length) * 100;
        document.getElementById('progressBar').style.width = progress + '%';

        // T·∫°o options
        const optionsContainer = document.getElementById('optionsContainer');
        optionsContainer.innerHTML = '';

        question.options.forEach((option, index) => {
            const optionElement = document.createElement('div');
            optionElement.className = 'option';
            optionElement.textContent = option;
            optionElement.onclick = () => selectOption(option, optionElement);
            optionsContainer.appendChild(optionElement);
        });

        // Reset buttons
        document.getElementById('checkButton').style.display = 'inline-block';
        document.getElementById('nextButton').style.display = 'none';
        document.getElementById('tauntMessage').style.display = 'none';

        // Reset selected answer
        selectedAnswer = null;

        // Reset option styles
        document.querySelectorAll('.option').forEach(opt => {
            opt.classList.remove('selected', 'correct', 'wrong');
        });
    }

    function selectOption(option, element) {
        if (document.getElementById('nextButton').style.display === 'block') return;

        // B·ªè ch·ªçn t·∫•t c·∫£
        document.querySelectorAll('.option').forEach(opt => {
            opt.classList.remove('selected');
        });

        // Ch·ªçn option n√†y
        element.classList.add('selected');
        selectedAnswer = option;
    }

    function checkAnswer() {
        if (!selectedAnswer) {
            alert('Vui l√≤ng ch·ªçn m·ªôt ƒë√°p √°n!');
            return;
        }

        const question = currentQuiz.questions[currentQuestionIndex];
        const isCorrect = selectedAnswer === question.correctAnswer;

        // Hi·ªÉn th·ªã ƒë√∫ng/sai
        document.querySelectorAll('.option').forEach(opt => {
            opt.classList.remove('correct', 'wrong');
            if (opt.textContent === question.correctAnswer) {
                opt.classList.add('correct');
            } else if (opt.textContent === selectedAnswer && !isCorrect) {
                opt.classList.add('wrong');
            }
        });

        if (isCorrect) {
            score++;
            document.getElementById('score').textContent = score;
        } else {
            // Th√™m v√†o danh s√°ch c√¢u sai
            incorrectQuestions.push({
                ...question,
                userAnswer: selectedAnswer
            });

            // Hi·ªÉn th·ªã c√¢u ch√™u ch·ªçc
            const randomTaunt = tauntMessages[Math.floor(Math.random() * tauntMessages.length)];
            document.getElementById('tauntMessage').textContent = randomTaunt;
            document.getElementById('tauntMessage').style.display = 'block';
            tauntsReceived.push(randomTaunt);
        }

        // Hi·ªÉn th·ªã n√∫t ti·∫øp theo
        document.getElementById('checkButton').style.display = 'none';
        document.getElementById('nextButton').style.display = 'inline-block';
    }

    function nextQuestion() {
        currentQuestionIndex++;

        if (currentQuestionIndex < currentQuiz.questions.length) {
            displayCurrentQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        document.getElementById('quizSection').style.display = 'none';
        document.getElementById('resultSection').style.display = 'block';

        const totalQuestions = currentQuiz.questions.length;
        const percentage = Math.round((score / totalQuestions) * 100);

        document.getElementById('finalScore').textContent = score;
        document.getElementById('totalScore').textContent = totalQuestions;

        let title = '';
        let message = '';

        if (percentage === 100) {
            title = 'üèÜ Xu·∫•t s·∫Øc!';
            message = 'B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng t·∫•t c·∫£ c√¢u h·ªèi!';
        } else if (percentage >= 80) {
            title = 'üëç R·∫•t t·ªët!';
            message = 'B·∫°n c√≥ ki·∫øn th·ª©c kh√° v·ªØng ƒë·∫•y!';
        } else if (percentage >= 60) {
            title = 'üëå Kh√° ƒë·∫•y!';
            message = 'C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©!';
        } else {
            title = 'üí™ C·ªë l√™n!';
            message = '√în t·∫≠p th√™m ƒë·ªÉ c·∫£i thi·ªán nh√©!';
        }

        document.getElementById('resultTitle').textContent = title;
        document.getElementById('resultMessage').textContent =
            `B·∫°n ƒë√£ ƒë√∫ng ${score}/${totalQuestions} c√¢u (${percentage}%). ${message}`;

        // Hi·ªÉn th·ªã c√¢u ch√™u ch·ªçc n·∫øu c√≥
        if (tauntsReceived.length > 0) {
            document.getElementById('tauntsCollection').style.display = 'block';
            const tauntsList = document.getElementById('tauntsList');
            tauntsList.innerHTML = '';

            tauntsReceived.forEach(taunt => {
                const tauntItem = document.createElement('div');
                tauntItem.style.padding = '10px';
                tauntItem.style.margin = '5px 0';
                tauntItem.style.background = '#ffeaa7';
                tauntItem.style.borderRadius = '5px';
                tauntItem.textContent = taunt;
                tauntsList.appendChild(tauntItem);
            });
        }
    }

    function retryIncorrect() {
        if (incorrectQuestions.length === 0) {
            alert('B·∫°n kh√¥ng c√≥ c√¢u n√†o sai ƒë·ªÉ l√†m l·∫°i!');
            return;
        }

        currentQuiz.questions = incorrectQuestions;
        startQuiz();
    }

    function retryAll() {
        startQuiz();
    }

    // ========== UTILITY FUNCTIONS ==========
    function copyCode() {
        const code = document.querySelector('code').textContent;
        navigator.clipboard.writeText(code).then(() => {
            alert('‚úÖ ƒê√£ copy code v√†o clipboard!');
        });
    }

    // Kh·ªüi t·∫°o trang
    document.addEventListener('DOMContentLoaded', function() {
        loadSampleQuiz();
        showHome();

        // Th√™m hi·ªáu ·ª©ng cho c√°c n√∫t
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
            });
            btn.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });

        // Th√™m hi·ªáu ·ª©ng cho c√°c m·ª•c trong danh s√°ch
        document.querySelectorAll('li').forEach(item => {
            item.addEventListener('click', function() {
                this.style.animation = 'none';
                setTimeout(() => {
                    this.style.animation = 'shake 0.5s ease-in-out';
                }, 10);
            });
        });
    });
</script>
</body>
</html>